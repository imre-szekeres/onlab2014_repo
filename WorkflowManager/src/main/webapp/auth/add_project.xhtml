<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c='http://java.sun.com/jsp/jstl/core'>

	<ui:composition template="../WEB-INF/templates/wm_frame.xhtml">	
        <ui:define name='content_title'>
            <c:choose>
	            <c:when test="#{sessionScope.subject.hasRole( 'manager' )}" >
	                <h:outputText value='Create Project'/>
	            </c:when>
	            <c:otherwise>
	                <h:outputText value='Projects'/>
	            </c:otherwise>
            </c:choose>
        </ui:define>
        
        <ui:define name='content'>
           
           <c:if test="#{sessionScope.subject.hasRole( 'manager' )}">
           <h:form prependId='false' id='project-form'>

	           <div id='createproject-div'>
	           <h:panelGrid columns='2' id='project-panel'>
	           
	               <f:facet name='errors'>
	                  <h:panelGroup>
	                      <h:message for='project-name' styleClass='error-message'/>
	                  </h:panelGroup>
	               </f:facet>  
	               <h:outputText value='Project Name: '></h:outputText>
	               <h:inputText  value='#{ projectManager.project.name }' name='project_name' id='project-name' 
	                             validator='#{ projectManager.validateName }' styleClass='inputTextClass'/>
	               
	               <f:facet name='errors'>
	                  <h:panelGroup>
	                      <h:message for='project-description' styleClass='error-message'/>
	                  </h:panelGroup>
	               </f:facet>
	               <h:outputText value='Description: ' ></h:outputText>
	               <h:inputTextarea value='#{ projectManager.project.description }' name='project_description' id='project-description' 
	                                validator='#{ projectManager.validateDescription }' styleClass='inputTextAreaClass'/>
	               
	               <h:outputText value='Workflow: ' ></h:outputText>
	               <h:selectOneMenu value="#{ projectManager.workflowName }" styleClass='selectMenu'>
	                   <c:forEach items='#{ workflowManager.workflowList }' var='workflow' >
	                       <f:selectItem itemValue='#{ workflow.name }' itemLabel='#{ workflow.name }' />
	                   </c:forEach>
	               </h:selectOneMenu>
	               
	               <f:facet name='footer'>
	                   <h:panelGroup>
	                       <h:commandButton value='Create' action='#{ projectManager.create() }' id='submit-btn' styleClass='cvf-btn btn' ></h:commandButton>
	                   </h:panelGroup>
	               </f:facet>
	           </h:panelGrid>
	           </div>
	           
	        </h:form>
	        </c:if>
        
        <ui:include src='../fragments/projects.xhtml' />
        </ui:define>
	</ui:composition>
</html>