<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

	
	<ui:composition template="WEB-INF/templates/wm_frame.xhtml" >
			<ui:define name="content">
			
				<h:form id="adduser_form" method='POST'>
				    <h:panelGrid columns="1" cellspacing="1" cellpadding="2">
				      <f:facet name="header">
				        
				        <c:choose>
				          <c:when test="#{ sessionScope['subject'].hasRole('administrator') }">
				            <h:outputText value="Create User" />
				            <c:set var="button_text" value="Create User"></c:set>
				          </c:when>
				          <c:otherwise>
				            <h:outputText value="Register Form" />
				            <c:set var="button_text" value="Register"></c:set>
				          </c:otherwise>
				        </c:choose>
				        
				      </f:facet>
				      
				      <h:message for="user_in" styleClass='error-message' />
				      <h:outputText value='Username:' />
    				  <h:inputText id="user_in" name="username" value="#{ loginManager.username }" 
                        validator='#{ loginManager.validateUsernameIn }' />
				      
				      <h:message for="pass_in" styleClass='error-message' />
				      <h:outputText value='Password:' />
				      <h:inputSecret id="pass_in" name="password" value="#{ loginManager.password }" 
				                validator='#{ loginManager.validatePasswordIn }' label='Password: ' />
				      
				      <h:message for="passa_in" styleClass='error-message' />
                      <h:outputText value='Password Again:' />
                      <h:inputSecret id="passa_in" name="passwordAgain" 
                             value="#{ loginManager.passwordAgain }" />
				      
				      <h:message for="email_in" styleClass='error-message' />
				      <h:outputText value='Email:' />
                      <h:inputText id="email_in" name="email" value="#{ loginManager.email }" 
                            validator='#{ loginManager.validateEmailIn }' label='Balance: '/>
				      
				      <h:message for='desc_in' styleClass='error-message' />
				      <h:outputText value='Description:' />
				      <h:inputTextarea id='desc_in' name="description" value="#{ loginManager.description }" />
				      
				      <h:outputText value='Role: ' />
				      <h:inputText id='role_in' name='rolename' value='#{ loginManager.role }' />
				      <h:commandButton action="#{ loginManager.register }" value="#{ button_text }" id="adduser_btn" />
				    </h:panelGrid>
				</h:form>
				
			</ui:define>
	</ui:composition>

</html>
