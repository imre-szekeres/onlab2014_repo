<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

	<!-- 
		Replace path to template, title, header and body
		with actual data.
	 -->
	<ui:composition template="WEB-INF/templates/wm_frame.xhtml" >
			<ui:define name="content">
				<h:form id="add_uform">
				    <h:panelGrid columns="1" cellspacing="1" cellpadding="2">
				      <f:facet name="header">
				        
				        <c:choose>
				          <c:when test="#{ sessionScope['subject'].hasRole('administrator') }">
				            <h:outputText value="Create User" />
				            <c:set var="button_text" value="Create User"></c:set>
				          </c:when>
				          <c:otherwise>
				            <h:outputText value="Register Form" />
				            <c:set var="button_text" value="Register"></c:set>
				          </c:otherwise>
				        </c:choose>
				        
				      </f:facet>
				      
				      <h:message for="user_in" styleClass='error-message' />
				      <h:outputLabel for='user_in'>Username: </h:outputLabel>
    				  <h:inputText id="user_in" name="username" value="#{ loginManager.username }" 
                        validator='#{ loginManager.validateUsernameIn }' />
				      
				      <h:message for="pass_in" styleClass='error-message' />
				      <h:outputLabel for='pass_in'>Password: </h:outputLabel>
				      <h:inputSecret id="pass_in" name="password" value="#{ loginManager.password }" 
				                validator='#{ loginManager.validatePasswordIn }' label='Password: ' />
				      
				      <h:message for="passa_in" styleClass='error-message' />
                      <h:outputLabel for='passa_in'>Password Again: </h:outputLabel>
                      <h:inputSecret id="passa_in" name="passwordAgain" 
                             value="#{ loginManager.passwordAgain }" 
                             validator='#{ loginManager.validatePasswordAgainIn }' />
				      
				      <h:message for="bal_in" styleClass='error-message' />
				      <h:outputLabel for='bal_in' >Balance: </h:outputLabel>
                      <h:inputText id="bal_in" name="balance" value="#{ loginManager.balance }" 
                            validator='#{ loginManager.validateBalanceIn }' label='Balance: '/>
				      
				      <h:message for='desc_in' styleClass='error-message' />
				      <h:outputLabel for="desc_in" >Description</h:outputLabel>
				      <h:inputTextarea id='desc_in' name="description" value="#{ loginManager.description }"
				                       validator='#{ loginManager.validateDescriptionIn }' />
				      
				      <!-- TODO: add roles... -->
				      <h:commandButton action="#{loginManager.register}" value="#{ button_text }" id="login_button" />
				    </h:panelGrid>
				</h:form>
			</ui:define>
	</ui:composition>

</html>
